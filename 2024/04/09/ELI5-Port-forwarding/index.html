<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Once upon a time, there was a very, very long street. It was so long  that you could build over 4 billion houses along this street. The people  who designed and built this street were very smart, and">
<meta property="og:type" content="article">
<meta property="og:title" content="ELI5: Port forwarding">
<meta property="og:url" content="https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/">
<meta property="og:site_name" content="A blog">
<meta property="og:description" content="Once upon a time, there was a very, very long street. It was so long  that you could build over 4 billion houses along this street. The people  who designed and built this street were very smart, and">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-04-09T11:56:46.000Z">
<meta property="article:modified_time" content="2024-04-09T12:06:37.788Z">
<meta property="article:author" content="Leo Huang">
<meta property="article:tag" content="networking">
<meta property="article:tag" content="eli5">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>ELI5: Port forwarding</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Blog</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/2024/06/01/How-to-host-a-private-blog/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/2024/04/08/TLS-certificates-for-locally-hosted-webservices/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&text=ELI5: Port forwarding"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&is_video=false&description=ELI5: Port forwarding"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ELI5: Port forwarding&body=Check out this article: https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&name=ELI5: Port forwarding&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&t=ELI5: Port forwarding"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#We-need-taller-buildings"><span class="toc-number">1.</span> <span class="toc-text">We need taller buildings</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#What%E2%80%99s-next"><span class="toc-number">2.</span> <span class="toc-text">What’s next?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#So%E2%80%A6-what%E2%80%99s-port-forwarding"><span class="toc-number"></span> <span class="toc-text">So… what’s port forwarding?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-happened-to-Fifth-Street"><span class="toc-number">1.</span> <span class="toc-text">What happened to Fifth Street?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Double-NAT"><span class="toc-number">2.</span> <span class="toc-text">Double NAT</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        ELI5: Port forwarding
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Leo Huang</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-04-09T11:56:46.000Z" itemprop="datePublished">2024-04-09</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/eli5/" rel="tag">eli5</a>, <a class="tag-link-link" href="/tags/networking/" rel="tag">networking</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Once upon a time, there was a very, very long street. It was so long 
that you could build over 4 <em>billion</em> houses along this street. The people 
who designed and built this street were very smart, and they thought that 
this would be enough for everyone to have a house on the street.</p>
<p>This street was called <strong>Fourth Street</strong>.</p>
<p>The people who lived on Fourth Street never left their house, but they loved 
sending letters to each other. As long as you knew the <strong>address</strong> of someone 
else living on Fourth Street, you could get a letter delivered to <em>any</em> 
house on the street very very quickly.</p>
<p>Every house on Fourth Street had a very special letterbox. The letterbox had 
many, <em>many</em> little compartments in it. In fact, each letterbox had 65,535 
little compartments. These were called <strong>ports</strong>.</p>
<p>People would use these ports to manage their mail. For example, a person 
might want all of the letters related to Minecraft to arrive in one 
particular port. So, in order to send a letter to someone, you had to 
specify a port in addition to the address.</p>
<p>At first, there weren’t many people living on Fourth Street. But it grew in 
popularity very quickly. Everybody wanted a house of their own, with 
their own letterbox that they could use to exchange letters with 
everyone else. Within 10 years, over half of the street was occupied.</p>
<p>In another 5 years, the entire street was completely filled. </p>
<h3 id="We-need-taller-buildings"><a href="#We-need-taller-buildings" class="headerlink" title="We need taller buildings"></a>We need taller buildings</h3><p>There were still more and more people that wanted to move into Fourth Street.
It was decided that instead of giving a house to every single person, 
multiple people would have to share a house. The houses on Fourth Street 
started to be converted into taller apartments, where many people could live 
at the same address.</p>
<p>Each apartment was still only allowed to have a single special letterbox on 
the street. But the people living on Fourth Street loved the special letterboxes
so much that they would install one right outside of their room door.</p>
<p>Even so, the postmen could only deliver letters to the shared letterbox on 
the street. They didn’t know how to navigate the insides of the apartment.</p>
<p>To solve this problem, each apartment would have a <strong>doorman</strong> who would check 
the shared mailbox for letters, and deliver them to the letterboxes <em>inside</em> 
the apartment.</p>
<p>But how did the doorman know where each letter should go? The doorman had a 
little <strong>rulebook</strong> that had instructions like:</p>
<blockquote>
<p>Letters in port 80 should be delivered to port 9000 in the third room’s 
letterbox.</p>
</blockquote>
<p>If you wanted to talk to someone about Minecraft, you could just tell them 
to send letters to your street address on port 100, and then tell your 
doorman to forward all letters in port 100 to port 200 in your personal 
letterbox.</p>
<p>And so, everyone was able to share the addresses on Fourth Street and send 
letters to each other again.</p>
<h3 id="What’s-next"><a href="#What’s-next" class="headerlink" title="What’s next?"></a>What’s next?</h3><p>Meanwhile, there is a new street being built. This one is even longer than 
Fourth Street. It is incredibly, mind-bogglingly long. This new street 
can fit far more than a measly 4 billion addresses. It can fit 340,282,
366,920,938,463,463,374,607,431,768,211,456 (340 undecillion) addresses. 
Surely, this time, we will never ever run out addresses again.</p>
<p>This new street is called <strong>Sixth Street</strong>.</p>
<h2 id="So…-what’s-port-forwarding"><a href="#So…-what’s-port-forwarding" class="headerlink" title="So… what’s port forwarding?"></a>So… what’s port forwarding?</h2><p>In real computing terms, Fourth Street is the <strong>IPV4 address space</strong>. There are 
truly over 4 billion IPV4 addresses (although not all are reserved for use 
as public IP addresses), and we have truly run out since 2011.</p>
<p>Computers also communicate via ports. Instead of letters, they send 
<strong>packets</strong>. There are certain standard ports that everyone has agreed to 
use for certain purposes. For example:</p>
<ul>
<li>Port 80: default port for HTTP web traffic</li>
<li>Port 443: default port for HTTPS encrypted web traffic</li>
<li>Port 25565: default port for hosting Minecraft servers</li>
<li>etc</li>
</ul>
<p>But you can really use any port you like - there’s no difference.</p>
<p>The street-level address from the analogy would be your <strong>public IP 
address</strong>, and it might look something like <code>172.217.167.78</code>. This part of 
the network is called the <strong>Wider Area Network (WAN)</strong>.</p>
<p>Within the apartment we define the <strong>Local Area Network (LAN)</strong>, and each room 
would have a <strong>local IP address</strong> which might look something like <code>192.168.1.1</code>.</p>
<p>The doorman described in the Fourth Street analogy would be a <strong>router</strong> in 
computing terms, and the job they are performing is called <strong>Network 
Address Translation (NAT)</strong>. </p>
<p>The router is the bridge between the WAN and the LAN.</p>
<p>The little rulebook described in the analogy are the <strong>port forwarding 
rules</strong> that you can configure on your router. These rules simply tell your 
router how to route external WAN traffic on a particular port to an internal 
LAN address on a particular port.</p>
<p>It’s common for the external port to be the same as the internal one (eg, 
external port <code>25565</code> to internal <code>192.168.1.10:25565</code>), but there is 
absolutely no requirement for that to be the case.</p>
<h3 id="What-happened-to-Fifth-Street"><a href="#What-happened-to-Fifth-Street" class="headerlink" title="What happened to Fifth Street?"></a>What happened to Fifth Street?</h3><p>IPV5 was an experimental protocol that never took off. <a target="_blank" rel="noopener" href="https://www.lifewire.com/what-happened-to-ipv5-3971327">Lifewire</a>
provides a good overview of what happened to it.</p>
<h3 id="Double-NAT"><a href="#Double-NAT" class="headerlink" title="Double NAT"></a>Double NAT</h3><p>Just a note - the most common problem you’ll run into if you can’t get port 
forwarding to work is when your network is set up so that there are <em>two</em> 
layers of routers performing NAT. This is called <strong>double NAT</strong>.</p>
<p>Unless you have very special requirements, there is almost never a good reason
to have more than one router performing NAT in your home network.</p>
<p>You could probably port forward from router 1 to router 2, then from router 
2 to your computer. But the better solution is to restructure your network 
so that you don’t have double NAT.</p>
<p>Hopefully, you have a better understanding of how it all works and are 
better equipped to debug your home network now :)</p>

  </div>
</article>


    <div class="blog-post-comments">
        <div id="utterances_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>


        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Blog</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#We-need-taller-buildings"><span class="toc-number">1.</span> <span class="toc-text">We need taller buildings</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#What%E2%80%99s-next"><span class="toc-number">2.</span> <span class="toc-text">What’s next?</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#So%E2%80%A6-what%E2%80%99s-port-forwarding"><span class="toc-number"></span> <span class="toc-text">So… what’s port forwarding?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-happened-to-Fifth-Street"><span class="toc-number">1.</span> <span class="toc-text">What happened to Fifth Street?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Double-NAT"><span class="toc-number">2.</span> <span class="toc-text">Double NAT</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&text=ELI5: Port forwarding"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&is_video=false&description=ELI5: Port forwarding"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ELI5: Port forwarding&body=Check out this article: https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&title=ELI5: Port forwarding"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&name=ELI5: Port forwarding&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://leohuang.dev/2024/04/09/ELI5-Port-forwarding/&t=ELI5: Port forwarding"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2024
    Leo Huang
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">Home</a></li><!--
     --><!--
       --><li><a href="/about/">About</a></li><!--
     --><!--
       --><li><a href="/archives/">Blog</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

    <script type="text/javascript">
      var utterances_repo = 'cbreezier/cbreezier.github.io';
      var utterances_issue_term = 'pathname';
      var utterances_label = 'utterances';
      var utterances_theme = 'photon-dark';

      (function(){
          var script = document.createElement('script');

          script.src = 'https://utteranc.es/client.js';
          script.setAttribute('repo', utterances_repo);
          script.setAttribute('issue-term', 'pathname');
          script.setAttribute('label', utterances_label);
          script.setAttribute('theme', utterances_theme);
          script.setAttribute('crossorigin', 'anonymous');
          script.async = true;
          (document.getElementById('utterances_thread')).appendChild(script);
      }());
  </script>

</body>
</html>
